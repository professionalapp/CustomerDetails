@page "/CustomerDetails/{id}"
@model CustomerDetails.Pages.CustomerDetailsModel
@{
    ViewData["Title"] = "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„";
}

<div class="container mt-4 fade-in">
    <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© -->
    <div class="row mb-3">
        <div class="col-12">
            <a href="/" class="btn btn-secondary">
                <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </a>
        </div>
    </div>

    @if (Model.Customer != null)
    {
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ ğŸ‘¤</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <strong>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong><br>
                                <span class="text-primary">@Model.Customer.Id</span>
                            </div>
                            <div class="col-md-3">
                                <strong>Ø§Ù„Ø§Ø³Ù…:</strong><br>
                                <span>@Model.Customer.Name</span>
                            </div>
                            <div class="col-md-3">
                                <strong>Ø§Ù„Ø¹Ù…Ø±:</strong><br>
                                <span>@Model.Customer.Age Ø³Ù†Ø©</span>
                            </div>
                            <div class="col-md-3">
                                <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…:</strong><br>
                                <span>@Model.Customer.JoinDate.ToString("yyyy/MM/dd")</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="stat-card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                    <h5>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</h5>
                    <h3>@Model.TotalDeposits.ToString("C")</h3>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card" style="background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);">
                    <h5>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</h5>
                    <h3>@Model.TotalWithdrawals.ToString("C")</h3>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card @(Model.Balance >= 0 ? "bg-info" : "bg-warning")" 
                     style="background: linear-gradient(135deg, @(Model.Balance >= 0 ? "#17a2b8 0%, #6f42c1 100%" : "#ffc107 0%, #fd7e14 100%"));">
                    <h5>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</h5>
                    <h3>@Model.Balance.ToString("C")</h3>
                </div>
            </div>
        </div>

        <!-- Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h4 class="mb-0">Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ğŸ’³</h4>
                    </div>
                    <div class="card-body">
                        @if (Model.CustomerTransactions.Any())
                        {
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>
                                            <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                            <th>Ø§Ù„ÙˆÙ‚Øª</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var transaction in Model.CustomerTransactions)
                                        {
                                            <tr>
                                                <td>
                                                    <span class="badge @(transaction.Type == "Ø¥ÙŠØ¯Ø§Ø¹" ? "bg-success" : "bg-danger") fs-6">
                                                        @transaction.Type
                                                    </span>
                                                </td>
                                                <td class="@(transaction.Type == "Ø¥ÙŠØ¯Ø§Ø¹" ? "text-success" : "text-danger") fw-bold">
                                                    @(transaction.Type == "Ø¥ÙŠØ¯Ø§Ø¹" ? "+" : "-")@transaction.Amount.ToString("C")
                                                </td>
                                                <td>@transaction.Date.ToString("yyyy/MM/dd")</td>
                                                <td>@transaction.Date.ToString("HH:mm")</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        }
                        else
                        {
                            <div class="text-center py-4">
                                <p class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„</p>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="row">
            <div class="col-12">
                <div class="alert alert-danger text-center">
                    <h4>Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</h4>
                    <p>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨.</p>
                </div>
            </div>
        </div>
    }
</div>

<style>
    .card {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border: none;
        margin-bottom: 20px;
    }
    
    .card-header {
        border-bottom: none;
    }
    
    .table th {
        background-color: #343a40 !important;
        color: white;
        font-weight: bold;
    }
    
    .table-hover tbody tr:hover {
        background-color: #f8f9fa;
    }
    
    .badge {
        font-size: 0.9em;
        padding: 0.5em 0.75em;
    }
    
    .text-success {
        color: #28a745 !important;
    }
    
    .text-danger {
        color: #dc3545 !important;
    }
</style>

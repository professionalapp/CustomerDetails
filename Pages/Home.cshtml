@page
@model CustomerDetails.Pages.HomeModel
@{
    ViewData["Title"] = "تفاصيل العملاء - الصفحة الرئيسية";
}

@section Styles {
    <link rel="stylesheet" href="~/css/splash.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/index.css" asp-append-version="true" />
}

<!-- Splash Screen -->
<div class="splash-screen" id="splashScreen">
    <div class="splash-container">
        <div class="splash-content">
            <div class="logo-container">
                <div class="logo-icon">
                    <i class="fas fa-users fa-4x text-primary"></i>
                </div>
                <h1 class="splash-title">تفاصيل العملاء</h1>
                <p class="splash-subtitle">العلاونة للصرافة</p>
            </div>

            <div class="loading-container">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                </div>
                <p class="loading-text">جاري التحميل...</p>
            </div>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="countdown">
                    <span id="countdown">5</span> ثانية
                </div>
            </div>
        </div>

        <div class="splash-footer">
            <p class="footer-text">© 2025 - جميع الحقوق محفوظة</p>
        </div>
    </div>
</div>

<!-- Main Content (Hidden Initially) -->
<div id="mainContent" style="display: none;">
    <div class="hero-section">
        <div class="container">
            <div class="row align-items-center min-vh-100">
                <div class="col-lg-6">
                    <div class="hero-content">
                        <h1 class="hero-title">
                            مرحباً بك في نظام
                            <span class="text-primary">تفاصيل العملاء</span>
                        </h1>
                        <p class="hero-description">
                            نظام متطور لإدارة العملاء والمعاملات المالية مع واجهة عربية سهلة الاستخدام
                        </p>
                        <div class="hero-buttons">
                            <a href="/Search" class="btn btn-primary btn-lg me-3">
                                <i class="fas fa-search"></i> ابدأ البحث
                            </a>
                            <a href="#features" class="btn btn-outline-primary btn-lg">
                                <i class="fas fa-info-circle"></i> تعرف على الميزات
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="hero-image">
                        <div class="floating-cards">
                            <div class="floating-card card-1">
                                <i class="fas fa-users fa-2x text-primary"></i>
                                <h5>إدارة العملاء</h5>
                            </div>
                            <div class="floating-card card-2">
                                <i class="fas fa-chart-line fa-2x text-success"></i>
                                <h5>المعاملات المالية</h5>
                            </div>
                            <div class="floating-card card-3">
                                <i class="fas fa-search fa-2x text-info"></i>
                                <h5>البحث المتقدم</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- قسم الميزات -->
    <section id="features" class="features-section">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="section-title">ميزات النظام</h2>
                    <p class="section-description">اكتشف الميزات المتطورة التي يوفرها نظامنا</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users fa-3x text-primary"></i>
                        </div>
                        <h4>إدارة العملاء</h4>
                        <p>إدارة شاملة لبيانات العملاء مع إمكانية إضافة وتعديل المعلومات</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-money-bill-wave fa-3x text-success"></i>
                        </div>
                        <h4>المعاملات المالية</h4>
                        <p>تتبع جميع المعاملات المالية مع حساب الإحصائيات تلقائياً</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-search fa-3x text-info"></i>
                        </div>
                        <h4>البحث الذكي</h4>
                        <p>بحث متقدم مع عرض النتائج فورياً أثناء الكتابة</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- قسم الإحصائيات -->
    <section class="stats-section">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="section-title text-white">إحصائيات النظام</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-4">
                    <div class="stat-item">
                        <div class="stat-number">@Model.Customers.Count</div>
                        <div class="stat-label">عميل مسجل</div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="stat-item">
                        <div class="stat-number">@Model.Transactions.Count</div>
                        <div class="stat-label">معاملة مالية</div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="stat-item">
                        <div class="stat-number">@Model.Transactions.Where(t => t.Type == "إيداع").Count()</div>
                        <div class="stat-label">إيداع</div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="stat-item">
                        <div class="stat-number">@Model.Transactions.Where(t => t.Type == "سحب").Count()</div>
                        <div class="stat-label">سحب</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- قسم الدعوة للعمل -->
    <section class="cta-section">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <h2 class="cta-title">ابدأ الآن</h2>
                    <p class="cta-description">استخدم نظام البحث المتقدم للعثور على بيانات العملاء</p>
                    <a href="/Search" class="btn btn-primary btn-lg">
                        <i class="fas fa-rocket"></i> ابدأ البحث الآن
                    </a>
                </div>
            </div>
        </div>
    </section>
</div> <!-- End Main Content -->

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // التحقق من وجود العناصر المطلوبة
            const countdownElement = document.getElementById('countdown');
            const progressFill = document.querySelector('.progress-fill');
            const splashScreen = document.getElementById('splashScreen');
            const mainContent = document.getElementById('mainContent');

            // إذا لم تكن العناصر موجودة، لا نفعل شيئاً
            if (!countdownElement || !progressFill || !splashScreen || !mainContent) {
                console.log('Splash screen elements not found');
                return;
            }

            let countdown = 5;
            let isTransitioning = false;

            // تحديث العد التنازلي
            const timer = setInterval(function () {
                if (isTransitioning) return;
                
                countdown--;
                countdownElement.textContent = countdown;

                // تحديث شريط التقدم
                const progress = ((5 - countdown) / 5) * 100;
                progressFill.style.width = progress + '%';

                if (countdown <= 0) {
                    clearInterval(timer);
                    transitionToMainContent();
                }
            }, 1000);

            // دالة الانتقال إلى المحتوى الرئيسي
            function transitionToMainContent() {
                if (isTransitioning) return;
                isTransitioning = true;

                // إخفاء Splash Screen مع تأثير انتقالي
                splashScreen.style.opacity = '0';
                splashScreen.style.transition = 'opacity 0.5s ease-out';
                
                setTimeout(function() {
                    splashScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                    mainContent.style.opacity = '0';
                    mainContent.style.transition = 'opacity 0.5s ease-in';
                    
                    setTimeout(function() {
                        mainContent.style.opacity = '1';
                    }, 50);
                }, 500);
            }

            // إمكانية النقر للانتقال السريع
            splashScreen.addEventListener('click', function (e) {
                e.preventDefault();
                clearInterval(timer);
                transitionToMainContent();
            });

            // إمكانية الضغط على مفتاح للانتقال السريع
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Enter' || e.key === ' ' || e.key === 'Escape') {
                    e.preventDefault();
                    clearInterval(timer);
                    transitionToMainContent();
                }
            });
        });
    </script>
}
